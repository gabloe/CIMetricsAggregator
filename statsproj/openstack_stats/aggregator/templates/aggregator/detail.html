<!--
   Interface for Openstack CI metrics tool.
   Copyright 2014 Gabriel Loewen
   Microsoft Openstack CI Lab team
-->

<!doctype html>
<html>
<head>
{% load staticfiles %}
<script src="/static/jquery-1.9.1.js" type="text/javascript"></script>
<script src="/static/jquery-ui.js" type="text/javascript"></script>
<script src="/static/flot/jquery.flot.js" type="text/javascript"></script>
<script src="/static/flot/jquery.flot.time.js" type="text/javascript"></script>
<script src="/static/flot/jquery.flot.pie.js" type="text/javascript"></script>
<script src="/static/flot/jquery.flot.resize.js" type="text/javascript"></script>
<script src="/static/flot/jquery.flot.canvas.js" type="text/javascript"></script>
<script src="/static/flot/jquery.flot.symbol.js" type="text/javascript"></script>
<script src="/static/flot/jquery.flot.legendoncanvas.js" type="text/javascript"></script>
<script src="/static/base64.js" type="text/javascript"></script>
<script src="/static/canvas2image.js" type="text/javascript"></script>
<script src="/static/flot/jquery.flot.saveAsImage.js" type="text/javascript"></script>

<!-- Get variables from Django, and pass them into corresponding Javascript arrays -->
<script type="text/javascript">
   var novaSuccess = {{ novaSuccess|safe }};
   var novaFail = {{ novaFail|safe }};
   var novaMiss = {{ novaMiss|safe }};
   var neutronSuccess = {{ neutronSuccess|safe }};
   var neutronFail = {{ neutronFail|safe }};
   var neutronMiss = {{ neutronMiss|safe }};
   var upstreamNovaSuccess = {{ upstreamNovaSuccess|safe }};
   var upstreamNovaFail = {{ upstreamNovaFail|safe }};
   var upstreamNovaMiss = {{ upstreamNovaMiss|safe }};
   var upstreamNeutronSuccess = {{ upstreamNeutronSuccess|safe }};
   var upstreamNeutronFail = {{ upstreamNeutronFail|safe }};
   var upstreamNeutronMiss = {{ upstreamNeutronMiss|safe }};
</script>
<script type="text/javascript" src="/static/aggregator.js"></script>
<link href="/static/themes/base/jquery-ui.css" rel="stylesheet" type="text/css">
<link href="/static/aggregator.css" rel="stylesheet" type="text/css">
<title>CI Lab Metrics Results</title>
</head>
<body>
<div id="content">
   <div id="sidebar">
      {% if totalSuccess or totalFail or totalMiss %}
         <h2>Total: {{ totalSuccess|add:totalFail|add:totalMiss }}</h2>
         <h2>Success: {{ totalSuccess }}</h2>
         <h2>Failed: {{ totalFail }}</h2>
         <h2>Missed: {{ totalMiss }}</h2><br />
         <h2>Nova:</h3>
         <div id="novaInfo"></div>
         <h2>Neutron:</h3>
         <div id="neutronInfo"></div>
      {% else %}
         <p> No data available!</p>
      {% endif %}
      <div id="links">
      <ul>
      <li><a href="/">Go Back</a></li>
      <li><a href="/accounts/logout">Logout</a></li>
      </ul>
      </div>
   </div>

   <div id="main">
      <form action="#" method="post"> {% csrf_token %}
         Start:&nbsp;<input type="text" class="datepicker" name="start" value="{{ start }}"/>&nbsp;End:&nbsp;<input type="text" class="datepicker" name="end" value="{{ end }}"/>&nbsp;
         <input type="submit" name="submit" value="Submit">
      </form>
      <table class="graphtable">
      <tr>
      <td><h3 class="inline">Nova Tests</h3><div class="legend" id="novachartlegend"></div></td>
      </tr>
      <tr>
      <td class="linechart" id="novachart"></td>
      <td class="piechart" id="novapiechart"></td>
      </tr>
      </table>
      <table class="graphtable">
      <tr>
      <td><h3 class="inline">Neutron Tests</h3><div class="legend" id="neutronchartlegend"></div></td>
      </tr>
      <tr>
      <td class="linechart" id="neutronchart"></td>
      <td class="piechart" id="neutronpiechart"></td>
      </tr>
      </table>
   </div>
</div>
</body>
</html>
